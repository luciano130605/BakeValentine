<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="contacto.css">
    <link href="../../index/img/logo.png" rel="shortcut icon" type="image/x-icon">
    <link href="../../index/img/logo.png" rel="webssite icon" type="png">
    <script type="module" src="gmail.js"></script>
    <script type="module" src="user.js"></script>
    <script type="module" src="cargar.js"></script>
    <title>Contacto</title>
</head>

<body>

    <header id="header">
        <h2 class="titulo">Contactanos</h2>
        <button id="menu-toggle"><i class="fas fa-bars"></i></button>
        <div id="menu">
            <button onclick="location.href='../../index/index.html'">
                <i class="fa-solid fa-house"></i>
            </button>
            <button onclick="location.href='../footer/carrito/carrito.html'"><i
                    class="fas fa-cart-shopping"></i></button>
            <button onclick="location.href='../footer/favoritos/favoritos.html'"><i
                    class="fa-solid fa-heart"></i></button>
            <button onclick="location.href='../footer/contacto/contacto.html'">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 672 672">
                    <path
                        d="M252 112L420 112C466.8 112 505.5 115 535.4 126.2C567.8 138.3 589.4 159.7 601.6 192.1C612.8 221.7 601.1 251.7 581.6 270C559.2 291 523.8 321 481.7 346C439.9 370.8 389 392 336 392C283 392 232.1 370.8 190.3 346C148.2 321 112.8 291 90.4 270C70.9 251.7 59.2 221.7 70.4 192.1C82.6 159.7 104.2 138.3 136.6 126.2C166.6 115 205.2 112 252 112zM420 168L252 168C205.7 168 175.9 171.2 156.2 178.6C138.9 185.1 129.3 194.6 122.8 211.8C121.3 215.8 122.1 222.8 128.7 229C149.4 248.4 181.5 275.6 218.9 297.7C256.6 320.1 297.4 335.9 336 335.9C374.6 335.9 415.4 320.1 453.1 297.7C490.5 275.5 522.5 248.4 543.3 229C550 222.8 550.7 215.8 549.2 211.8C542.7 194.6 533.1 185.1 515.8 178.6C496 171.2 466.3 168 420 168zM588 336C603.5 336 616 348.5 616 364C616 399.6 614.3 429.9 608.8 455.2C603.3 480.8 593.6 503 576.3 520.3C559 537.6 536.8 547.3 511.2 552.8C485.9 558.3 455.5 560 420 560L252 560C216.4 560 186.1 558.3 160.8 552.8C135.2 547.3 113 537.6 95.7 520.3C78.4 503 68.7 480.8 63.2 455.2C57.7 429.9 56 399.6 56 364C56 348.5 68.5 336 84 336C99.5 336 112 348.5 112 364C112 398.4 113.8 424.1 117.9 443.4C122 462.4 128 473.5 135.3 480.7C142.6 487.9 153.6 494 172.6 498.1C191.9 502.3 217.6 504 252 504L420 504C454.4 504 480.1 502.2 499.4 498.1C518.4 494 529.5 488 536.7 480.7C543.9 473.4 550 462.4 554.1 443.4C558.3 424.1 560 398.4 560 364C560 348.5 572.5 336 588 336z" />
                </svg>
            </button>
            <button id="user-btn" onclick="goToUser()"><i id="user-icon"
                    class="fa-solid fa-right-to-bracket"></i></button>
        </div>

        <script>

            const toggleBtn = document.getElementById('menu-toggle');
            const menu = document.getElementById('menu');

            toggleBtn.addEventListener('click', () => {
                menu.classList.toggle('show');
            });

            async function updateUserIcon() {
                try {
                    const res = await axios.get("http://127.0.0.1:3000/check-session", { withCredentials: true });
                    const userIcon = document.getElementById("user-icon");

                    if (res.data.logged) {
                        userIcon.className = "fa-solid fa-user"; // ðŸ‘¤ usuario logueado
                    } else {
                        userIcon.className = "fa-solid fa-right-to-bracket"; // ðŸ”‘ sin sesiÃ³n
                    }
                } catch (err) {
                    console.error("Error al verificar sesiÃ³n:", err.message);
                }
            }

            async function goToUser() {
                try {
                    const res = await axios.get("http://127.0.0.1:3000/check-session", { withCredentials: true });
                    if (res.data.logged) {
                        location.href = "../usuario/usuario.html";
                    } else {
                        location.href = "../login/login.html";
                    }
                } catch (err) {
                    // si falla, lo mando al login por defecto
                    location.href = "../login/login.html";
                }
            }

            // cuando cargue el index, pregunto al backend y seteo el Ã­cono
            document.addEventListener("DOMContentLoaded", updateUserIcon);

        </script>

    </header>

    <form id="form-contacto" action="enviar.php" method="POST" class="contactanos">
        <input type="text" id="Nombre" name="nombre" placeholder="Nombre completo" required>
        <br>
        <input type="tel" id="Telefono" name="telefono" placeholder="TelÃ©fono" required>
        <br>
        <input type="email" id="Email" name="email" placeholder="Email" required>
        <br>
        <input type="text" id="Mensaje" name="mensaje" placeholder="Mensaje" required>
        <br>
        <button type="submit" class="enviar">Enviar</button>
    </form>

    <div id="mensaje-respuesta" class="mensaje-respuesta"></div>
</body>

<footer>

    <div class="footer-nosotros">
        <a href="https://wa.me/541131121121" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://instagram.com/bakevalentine" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.google.com/maps/search/?api=1&query=Boedo,CABA" target="_blank"><i
                class="fas fa-map-marker-alt"></i></a>
    </div>
    </div>

    <div class="copyright">
        <p>&copy; 2025 Bake Valentine. Todos los derechos reservados.</p>

</footer>

</html>